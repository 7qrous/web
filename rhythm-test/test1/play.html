<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/15.1.3/Tone.js"></script>
    <style>
        #root {
            width: 300px;
            height: 600px;
            border: 1px solid #ccc;
            display: flex;
        }

        .line {
            border: 1px solid #eee;
            width: 50px;
            position: relative;

        }

        .note {
            animation: down linear 2s none;
            position: absolute;
            top: 0;
            visibility: hidden;
            background-color: black;
            width: 50px;
            height: 20px;
        }

        @keyframes down {
            0% {
                top: 0;
                visibility: visible;
            }

            100% {
                top: 600px;
                visibility: hidden;
            }
        }
    </style>
</head>

<body>
    <div id="root">
        <div class="line" id="line-a"></div>
        <div class="line" id="line-s"></div>
        <div class="line" id="line-d"></div>
        <div class="line" id="line-l"></div>
        <div class="line" id="line-;"></div>
        <div class="line" id="line-'"></div>
    </div>
    <div>
        <audio id="music" controls src="BrainFlow.mp3">

        </audio>
    </div>
    <script>
        let track = [
            { "timeStamp": 0, "key": "a" },
            { "timeStamp": 1649.6999999284744, "key": "l" },
            { "timeStamp": 2052.7999999523163, "key": "s" },
            { "timeStamp": 2192.5999999046326, "key": "d" },
            { "timeStamp": 2507.5, "key": "l" },
            { "timeStamp": 2956.1999999284744, "key": "d" },
            { "timeStamp": 3364.6999999284744, "key": "l" },
            { "timeStamp": 3777.899999976158, "key": "a" },
            { "timeStamp": 3982.2999999523163, "key": "s" },
            { "timeStamp": 4181.799999952316, "key": "d" },
            { "timeStamp": 4373.299999952316, "key": "l" },
            { "timeStamp": 4667.599999904633, "key": ";" },
            { "timeStamp": 4874.899999976158, "key": "l" },
            { "timeStamp": 5119.299999952316, "key": "a" },
            { "timeStamp": 5328.399999976158, "key": "s" },
            { "timeStamp": 5532.5, "key": "d" },
            { "timeStamp": 5751.299999952316, "key": "l" },
            { "timeStamp": 5963.899999976158, "key": ";" },
            { "timeStamp": 6354.899999976158, "key": "a" },
            { "timeStamp": 6778.5, "key": "s" },
            { "timeStamp": 6988.599999904633, "key": "d" },
            { "timeStamp": 7200, "key": "l" },
            { "timeStamp": 7401.899999976158, "key": "'" },
            { "timeStamp": 7627.599999904633, "key": ";" },
            { "timeStamp": 7802.099999904633, "key": "l" },
            { "timeStamp": 8057, "key": "s" },
            { "timeStamp": 8295.699999928474, "key": "d" },
            { "timeStamp": 8525.899999976158, "key": "l" },
            { "timeStamp": 8746.199999928474, "key": "a" },
            { "timeStamp": 8937.899999976158, "key": "s" },
            { "timeStamp": 9134.899999976158, "key": "d" },
            { "timeStamp": 9352.799999952316, "key": "l" },
            { "timeStamp": 9798.199999928474, "key": "a" },
            { "timeStamp": 10233, "key": "s" },
            { "timeStamp": 10429.5, "key": "d" },
            { "timeStamp": 10653.299999952316, "key": "l" },
            { "timeStamp": 10814.5, "key": ";" },
            { "timeStamp": 11354.899999976158, "key": "a" },
            { "timeStamp": 11978, "key": "s" },
            { "timeStamp": 12823.5, "key": "d" },
            { "timeStamp": 13710, "key": "a" },
            { "timeStamp": 13718.799999952316, "key": "l" },
            { "timeStamp": 14072.899999976158, "key": "s" },
            { "timeStamp": 14097.199999928474, "key": ";" },
            { "timeStamp": 14496, "key": "d" },
            { "timeStamp": 14503.599999904633, "key": "l" },
            { "timeStamp": 14908.299999952316, "key": "a" },
            { "timeStamp": 14913, "key": "'" },
            { "timeStamp": 15332.799999952316, "key": "s" },
            { "timeStamp": 15347, "key": ";" },
            { "timeStamp": 15726.599999904633, "key": "d" },
            { "timeStamp": 15733.199999928474, "key": "l" },
            { "timeStamp": 16158.899999976158, "key": ";" },
            { "timeStamp": 16169.399999976158, "key": "s" },
            { "timeStamp": 16655.599999904633, "key": "a" },
            { "timeStamp": 16658.099999904633, "key": "l" },
            { "timeStamp": 17084.699999928474, "key": "'" },
            { "timeStamp": 17096.099999904633, "key": "s" },
            { "timeStamp": 17492.299999952316, "key": "d" },
            { "timeStamp": 17498, "key": ";" },
            { "timeStamp": 17894.899999976158, "key": "s" },
            { "timeStamp": 17898.299999952316, "key": "l" },
            { "timeStamp": 18313.099999904633, "key": ";" },
            { "timeStamp": 18314.099999904633, "key": "a" },
        ]
        const sound = new Tone.Player("sound.mp3").toDestination();
        let startTime = 0;
        let trackPlay = false;
        document.body.addEventListener('keydown', function (e) {
            sound.start();
            console.log(startTime);
            if (!trackPlay) {
                trackPlay = true;
                for (let i = 0; i < track.length; i++) {
                    createNote(track[i].key, Math.floor(track[i].timeStamp / 100) * 100);
                }
            }

            setTimeout(function () {
                let music = document.getElementById('music');
                if (music.paused) {
                    music.play();
                }
                console.log(e.key);
            }, 2000);
        });
        function createNote(key, timeStamp) {
            setTimeout(function () {
                let note = document.createElement('div');
                note.className = 'note';
                let line = document.getElementById(`line-${key}`);
                line.appendChild(note);
            }, timeStamp);
        }
    </script>
</body>

</html>